<!DOCTYPE html>
<html>
<head>
  <!-- Make the page responsive on mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Import Google Font 'Inter' - (Beware: Many email clients ignore <head> content) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
    rel="stylesheet"
  />

  <style type="text/css">
    /* Base styling */
    body {
      margin: 20px;
      padding: 0;
      font-family: 'Inter', -apple-system, Arial, sans-serif;
    }

    h1 {
      margin-bottom: 30px;
      color: #00214d;
    }

    .input-container {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    input {
      width: 100%;
      max-width: 300px;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-family: inherit;
    }
    .copy-button {
      background-color: #004cb1;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 20px;
      transition: background-color 0.2s;
      font-family: inherit;
    }
    .copy-button:hover {
      background-color: #003a8c;
    }
    .copy-feedback {
      display: none;
      color: #004cb1;
      margin-left: 10px;
      font-family: inherit;
    }
    .signature-outer {
      border: 1px solid #dfe2e7;
      border-radius: 8px;
      padding: 20px;
      background-color: #ffffff;
      display: inline-block;
      margin-top: 20px;
      max-width: 100%;
    }
    .signature-container {
      /* Enable text selection on iOS */
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;

      /* For consistent font styling in email clients (where possible) */
      font-family: 'Inter', -apple-system, Arial, sans-serif;
      font-size: 13px;
      line-height: 20px;
      color: #000000;
    }
    .page-title {
      color: #00214d;
      font-size: 24px;
      font-weight: 500;
      margin-bottom: 30px;
      font-family: inherit;
    }

    /* Responsive adjustments */
    @media only screen and (max-width: 600px) {
      .signature-table {
        width: 100% !important;
      }
      .signature-table td {
        display: block;
        width: 100% !important;
        box-sizing: border-box;
      }
      /* Adjust padding for mobile */
      .signature-table td {
        padding-left: 20px !important;
        padding-right: 20px !important;
        text-align: center !important;
      }
    }
  </style>

  <script type="text/javascript">
    function formatPhoneNumber(phoneNumber) {
      // Remove all non-digit characters
      const cleaned = phoneNumber.replace(/\D/g, '');

      // Format as XXXX XXX XXX
      let formatted = '';
      for (let i = 0; i < cleaned.length && i < 10; i++) {
        if (i === 4 || i === 7) {
          formatted += ' ';
        }
        formatted += cleaned[i];
      }
      return formatted;
    }

    function formatPhoneNumberForTel(phoneNumber) {
      // Remove all non-digit characters
      const cleaned = phoneNumber.replace(/\D/g, '');
      // Remove leading 0 and add 61 prefix
      return '61' + cleaned.replace(/^0/, '');
    }

    function updateSignature() {
      var name = document.getElementById('name').value;
      var displayName = name || 'Your Name';
      var emailPrefix = name ? name.split(' ')[0].toLowerCase() : 'hello';
      var position = document.getElementById('position').value || 'MY AWESOME JOB';
      var mobile = formatPhoneNumber(document.getElementById('mobile').value || '0412345678');
      var mobileForTel = formatPhoneNumberForTel(document.getElementById('mobile').value || '0412345678');
      var email = emailPrefix + '@diolog.com.au';

      var signatureHtml = `
<table
  width="659"
  role="presentation"
  border="0"
  cellspacing="0"
  cellpadding="0"
  class="signature-table"
  style="
    font-family: 'Inter', -apple-system, Arial, sans-serif;
    font-size: 13px;
    line-height: 20px;
    color: #000000;
    letter-spacing: 3%;
    max-width: 659px;
  "
>
  <!-- Top row: Logo on the left, divider, text on the right -->
  <tr style="height: 119px; padding-bottom: 4px;">
    <td
      valign="center"
      align="center"
      style="padding-left:35px; padding-right: 39px; padding-top: 15px; padding-bottom: 15px;"
    >
      <!-- Logo (fixed width & height) -->
      <img
        src="diolog_email_logo_logo2x.png"
        alt="Diolog Logo"
        width="96"
        height="20"
        style="display:block;"
      />
    </td>
    <td>
      <table border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td
            style="background-color: #DFE2E7; width:1px; height: 88px;"
          ></td>
        </tr>
      </table>
    </td>
    <td
      valign="center"
      align="center"
      style="padding-left: 39px; padding-right:39px;"
    >
      <table
        role="presentation"
        border="0"
        cellpadding="0"
        cellspacing="0"
      >
        <tr>
          <td style="color:#00214D; font-size: 14px; font-weight: 500;  letter-spacing: 3%;">
            ${displayName}
          </td>
        </tr>
        <tr>
          <td
            style="
              color:#004CB1;
              font-size:14px;
              font-weight: 500;
              letter-spacing: 3%;
              padding-top:7px;
              text-wrap: nowrap;
            "
            unselectable="on"
          >
            ${position.toUpperCase()}
          </td>
        </tr>
      </table>
    </td>
    <td style="padding-top:5px; padding-right: 39px;">
      <a
        href="tel:${mobileForTel}"
        style="
          color:#384250;
          text-decoration:none;
          font-weight: medium;
          font-size: 12px;
          letter-spacing: 3%;
        "
        >${mobile}</a
      ><br />
      <a
        href="https://www.diolog.com.au"
        style="
          color:#384250;
          text-decoration:none;
          font-weight: medium;
          font-size: 12px;
          letter-spacing: 3%;
        "
        >www.diolog.com.au</a
      ><br />
      <a
        href="mailto:${email}"
        style="
          color:#384250;
          text-decoration:none;
          font-weight: medium;
          font-size: 12px;
          letter-spacing: 3%;
        "
        >${email}</a
      >
    </td>
  </tr>

  <!-- Banner row: full-width image matching container width -->
  <tr style="padding-bottom: 20px;">
    <td colspan="4">
      <a href="https://diolog.page.link/openApp">
        <img
          src="diolog_email_banner2x.png"
          alt="Download the Diolog App"
          width="100%"
          style="
            display:block;
            width:100%;
            border:0;
            line-height:0;
            outline:none;
            text-decoration:none;
          "
        />
      </a>
    </td>
  </tr>
</table>
`;
      var signatureContainer = document.getElementById('signature-container');
      signatureContainer.innerHTML = signatureHtml;
    }

    function selectAndCopySignature() {
      const signatureContainer = document.getElementById('signature-container');
      const feedback = document.getElementById('copy-feedback');

      try {
        // For iOS < 12.2
        if (document.body.createTextRange) {
          const range = document.body.createTextRange();
          range.moveToElementText(signatureContainer);
          range.select();
        }
        // For most modern browsers
        else if (window.getSelection) {
          const range = document.createRange();
          range.selectNodeContents(signatureContainer);
          const selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
        }
        feedback.textContent = 'Signature selected! Press Ctrl/Cmd + C to copy';
      } catch (err) {
        feedback.textContent = 'Please select and copy manually';
      }

      feedback.style.display = 'inline';
      setTimeout(() => {
        feedback.style.display = 'none';
      }, 3000);
    }

    // Format phone number as user types
    document.addEventListener('DOMContentLoaded', function () {
      const mobileInput = document.getElementById('mobile');
      mobileInput.addEventListener('input', function (e) {
        const cursorPosition = e.target.selectionStart;
        const formatted = formatPhoneNumber(e.target.value);

        e.target.value = formatted;

        // Attempt to keep cursor in place
        // (May not always behave perfectly on iOS)
        let offset = 0;
        if (cursorPosition > 4 && cursorPosition <= 7) offset = 1;
        if (cursorPosition > 7) offset = 2;

        // Reposition cursor
        e.target.setSelectionRange(cursorPosition + offset, cursorPosition + offset);
      });

      // Initialize the signature with default values
      updateSignature();
    });
  </script>
</head>

<body>
  <h1 class="page-title">Diolog Email Signature</h1>

  <div class="input-container">
    <label for="name">Name</label>
    <input
      type="text"
      id="name"
      placeholder="Your Name"
      oninput="updateSignature()"
    />
  </div>

  <div class="input-container">
    <label for="position">Position</label>
    <input
      type="text"
      id="position"
      placeholder="Position"
      oninput="updateSignature()"
    />
  </div>

  <div class="input-container">
    <label for="mobile">Phone number</label>
    <input
      type="tel"
      id="mobile"
      placeholder="0412 345 678"
      oninput="updateSignature()"
    />
  </div>

  <button onclick="selectAndCopySignature()" class="copy-button">Select Signature</button>
  <span id="copy-feedback" class="copy-feedback"
    >Signature selected! Press Ctrl/Cmd + C to copy</span
  >

  <br />

  <div class="signature-outer">
    <div id="signature-container" class="signature-container"></div>
  </div>
</body>
</html>
<!-- END EMAIL SIGNATURE HTML -->